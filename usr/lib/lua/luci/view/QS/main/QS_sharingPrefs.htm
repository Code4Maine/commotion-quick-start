<%-
   topheader="Welcome Back!"
   subheading="As a final step, let's fill out your sharing preferences."
   PageTitle="Sharing Prefrences"
-%>

<!-- include("QS/module/QS_header") -->
<!-- Begin QS Header -->

<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<!-- Are the favicon and stylesheet paths static or dynamic? -->
		<link type="image/png" href="<%=media%>/QS/images/favicon.ico" rel="shortcut icon" />
		<link rel="stylesheet" href="<%=media%>/QS/css/quickstart.css" type="text/css" />
		<!--script src="#" type="text/javascript"-->
		<!-- NEED: page title var in each page to be used in title and h1 -->
		<title><%=PageTitle%> | <%=node%></title>
	</head>
	<body>
		<div id="page">
<!-- End QS Header -->
<!-- include("QS/module/QS_infoBanner") -->
<!-- Begin QS infoBanner -->

<!---
		Seems like there should be a way to reuse this in logoInfoBanner
				-->
			<header>
				<!-- top level navigational elements -->
				<div class="navbar-inners">
					<div class="color0"></div>
					<div class="color1"></div>
					<div class="color2"></div>
					<div class="color3"></div>
					<div class="color4"></div>
				</div>
				<div id="zone-preface-wrapper">
					<div id="zone-preface">
						<hr />
						<!-- h1 functionally identical to title for accessibility -->
						<h1><%=PageTitle%></h1>
						<!-- Rest of header content -->
						<h2><%=topheader%></h2>
						<p><%=subheading%></p>
					</div>
				</div>
			</header>
<!-- End QS infoBanner -->
<!-- include("QS/module/QS_sharing") -->
<!-- Begin QS sharing -->
			<div id="zone-content-wrapper">
				<div id="zone-content">

					<div class="share_services">
						<%-
							for i,x in ipairs(share_service) do
								svc_name = x.svc_name
								svc_value = x.svc_value
								svc_help = x.svc_help
								svc_description = x.svc_description
						-%>
							<strong><%=svc_name%>:</strong><br />
							<input name="share.<%=svc_name%>" value="<%=svc_value%>" type="checkbox" onclick="ReverseDisplay('<%=svc_value%>');">
							<%=svc_description%>
							<span class="help" id="<%=svc_value%>">
								<img src="<%=media%>/QS/images/help.png" class="tip" alt="%=svc_help%" />
							</span>
							<div>
								<% include("QS/module/sharing/" .. svc_value) %>
							</div>
						<%end%>
					</div>

					<script type="text/javascript">
						function ReverseDisplay(d) {
							if(document.getElementById(d).style.display == "none") { document.getElementById(d).style.display = "block"; }
							else { document.getElementById(d).style.display = "none"; }
						}
					</script>

					<div name="modals">

						<aside id="upload" class="modal">
							<div>
								<!--=include("QS/module/QS_upload")-->
								<!-- BEGIN QS Upload -->
								<script type="text/javascript">
									function upload() {
										var ajax = new XHR();
										ajax.post(
											<%-REQUEST_URI%> + '/upload',
											formData,
											function(resp) {
												console.log(resp.status);
												if (resp.status !== 200) {
													console.log('error!');
												} else{ }
											}
										);
										return false;
									}
								</script>
								<form method="post" action="<%=REQUEST_URI%>/upload" enctype="multipart/form-data" onsubmit="startUpload();">
									<div class="cbi-section-node">
										<div class="cbi-value cbi-value-last<% if image_invalid then %> cbi-value-error<% end %>">
											<div class="cbi-value-field">
												<input type="file" name="<%=uploadType%>" id="media" />
												<input type="submit" class="cbi-button cbi-input-apply" value="<%:upload%>" style="width:100px"/>
												<div class="cbi-section-descr"> Upload <%=file_instructions%> </div>
											</div>
										</div>
									</div>
								</form>
								<!-- END QS Upload -->
								<!--TODO change close tag to be a submission of the form as well. -->
								<p><a href="#close" title="Close">Close</a></p>
							</div>
						</aside>
						<aside id="captive" class="modal">
							<div>
								<form method="post" action="<%=REQUEST_URI%>" enctype="multipart/form-data">
									<strong>Title</strong><br />
									<input type="text" name="<%=svc_value%>_title"><br />
									<strong>Main Text</strong><br />
									<textarea name="<%=svc_value%>_main" cols="60" royws="5"></textarea>
								</form>
						<!--TODO change close tag to be a submission of the form as well. -->
								<p><a href="#close" title="Close">Close</a></p>
							</div>
						</aside>

						<aside id="sap" class="modal">
							<div>
								<form method="post" action="<%=REQUEST_URI%>" enctype="multipart/form-data">
									<h2>Secure Access Point Password</h2>
									<p class="flavor">Choose a password that is between 9 and 30 characters. This name can be numbers, letters, and special characters.</p>
									<span class="help">
										<img src="<%=media%>/QS/images/help.png" class="tip" alt="The password that your private network will use. This password MUST be different than your node password if anyone else will use the private access point." />
									</span>
									<input type="password" name="pwd1">
									<p class="flavor">Retype your password here</p>
									<span class="help">
										<img src="<%=media%>/QS/images/help.png" class="tip" alt="Retype the password exactly." />
									</span>
									<input type="password" name="pwd2">
								</form>
								<!--TODO change close tag to be a submission of the form as well. -->
								<p><a href="#close" title="Close">Close</a></p>
							</div>
						</aside>
					</div>
				</div>
			</div>
<!-- End QS sharing -->
<!-- Fix this busted order -->
			<div id="zone-button-wrapper">
				<div id="zone-buttons">
					<div class="button-wrapper">
						<figure>
							<input type="image" src="<%=media%>/QS/images/plus.png" alt="Submit button" value="Submit"></br>
							<figcaption>Click Here to Finish</figcaption>
							</form>
						</figure>
					</div>
				</div>
			</div>
<!-- Fix busted form order -->
<!-- include("QS/module/QS_footer") -->
<!-- Begin QS footer -->

			<!-- include("QS/module/QS_adminButton") -->
			<!-- Begin QS adminButton -->

			<div id="zone-footer-wrapper">
				<div id="zone-footer">
						<div class="button-wrapper">
							<ul>
								<li>
									<a href="#">
										<figure>
											<img src="<%=media%>/QS/images/target_admin.png" alt="Advanced Config Button" class="button" />
											<figcaption>Advanced Config</figcaption>
										</figure>
									</a>
								</li>
								<li>
									<a href="#">
										<figure>
											<img src="<%=media%>/QS/images/help_admin.png" alt="Help Button" class="button" />
											<figcaption>Help</figcaption>
										</figure>
									</a>
								</li>
								<li>
									<a href="#">
										<figure>
											<img src="<%=media%>/QS/images/equal_admin.png" alt="Admin Menu Button" class="button" />
											<figcaption>Admin Menu</figcaption>
										</figure>
									</a>
								</li>
								<li>
									<a href="#">
										<figure>
											<img src="<%=media%>/QS/images/quit_admin.png" alt="Quit Quickstart Wizard Button" class="button" />
											<figcaption>Quit</figcaption>
										</figure>
									</a>
								</li>
							</ul>
						</div>
					</div>
			</div>
			<!-- End QS adminButton -->
		</div>
	</body>
</html>
<!-- End QS footer -->
